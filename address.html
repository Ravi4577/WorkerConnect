<?php
// Auto-generate Booking ID and Date before form loads
$booking_id = strtoupper(uniqid("BK_")); // Example: BK_654F9A2A5C2D1
$booking_date = date("Y-m-d H:i:s"); // Current date & time
?>
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Worker - Worker Connect</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        :root {
            --bg-1: #667eea;
            --bg-2: #764ba2;
        }

        body {
            background: linear-gradient(135deg, var(--bg-1), var(--bg-2));
            font-family: 'Poppins', sans-serif;
            color: #333;
            min-height: 100vh;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            /* allow content to grow downward */
            padding: 40px 20px;
            /* more top padding instead of vertical centering */
            overflow-x: hidden;
            /* hide horizontal scroll only */
            overflow-y: auto;
            /* allow vertical scrolling */
            perspective: 1200px;
            transform-style: preserve-3d;
            position: relative;
        }


        /* 3D moving background shapes layer */
        .bg-shapes {
            position: fixed;
            inset: 0;
            overflow: hidden;
            z-index: -2;
            pointer-events: none;
        }

        .bg-shapes span {
            position: absolute;
            width: 80px;
            height: 80px;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 24px;
            box-shadow: 0 18px 40px rgba(0, 0, 0, 0.25);
            animation: floatShape 10s infinite ease-in-out;
            transform-style: preserve-3d;
        }

        .bg-shapes span:nth-child(1) {
            top: 8%;
            left: 10%;
            animation-delay: 0s;
            transform: translateZ(-250px);
        }

        .bg-shapes span:nth-child(2) {
            top: 65%;
            left: 18%;
            width: 110px;
            height: 110px;
            border-radius: 50%;
            animation-delay: 1.5s;
            transform: translateZ(-300px);
        }

        .bg-shapes span:nth-child(3) {
            top: 18%;
            right: 12%;
            width: 130px;
            height: 130px;
            border-radius: 30px;
            animation-delay: 3s;
            transform: translateZ(-320px) rotate(18deg);
        }

        .bg-shapes span:nth-child(4) {
            bottom: 10%;
            right: 28%;
            width: 90px;
            height: 90px;
            border-radius: 999px;
            animation-delay: 4.5s;
            transform: translateZ(-270px);
        }

        @keyframes floatShape {
            0% {
                transform: translate3d(0, 0, var(--z, -280px)) rotate(0deg);
                opacity: 0.7;
            }

            50% {
                transform: translate3d(15px, -35px, var(--z, -280px)) rotate(180deg);
                opacity: 1;
            }

            100% {
                transform: translate3d(0, 0, var(--z, -280px)) rotate(360deg);
                opacity: 0.7;
            }
        }

        /* Snowfall layer */
        .snow-layer {
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: -1;
            overflow: hidden;
            transform-style: preserve-3d;
        }

        .flake {
            position: absolute;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.95), rgba(255, 255, 255, 0.1));
            opacity: 0.8;
            filter: blur(0.5px);
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.7);
            transform-style: preserve-3d;
            animation-name: fall;
            animation-timing-function: linear;
            animation-iteration-count: infinite;
        }

        @keyframes fall {
            0% {
                transform: translate3d(0, -10vh, var(--depth, -200px));
                opacity: 0;
            }

            10% {
                opacity: 1;
            }

            100% {
                transform: translate3d(var(--drift, 20vw), 110vh, var(--depth, -200px));
                opacity: 0.9;
            }
        }

        .booking-container {
            background: #fff;
            border-radius: 15px;
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.2);
            width: 100%;
            max-width: 700px;
            padding: 30px;
            position: relative;
            z-index: 1;
            transform-style: preserve-3d;
        }

        h2 {
            text-align: center;
            font-weight: 600;
            margin-bottom: 20px;
            color: #4b0082;
        }

        .section-title {
            font-weight: 500;
            margin-bottom: 10px;
            color: #555;
        }

        .form-control,
        .form-select {
            border-radius: 10px;
            padding: 10px;
            border: 1px solid #ccc;
        }

        .btn-submit {
            background: #4b0082;
            color: white;
            border: none;
            border-radius: 10px;
            padding: 10px 20px;
            width: 100%;
            transition: 0.3s;
        }

        .btn-submit:hover {
            background: #6a0dad;
            transform: scale(1.03);
        }

        .form-section {
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .logout-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #ff4d4d;
            border: none;
            padding: 8px 15px;
            border-radius: 8px;
            color: white;
            cursor: pointer;
            z-index: 2;
        }

        .logout-btn:hover {
            background: #e60000;
        }

        @media (max-width: 576px) {
            .booking-container {
                padding: 20px;
            }
        }
    </style>
</head>

<body>
    <!-- 3D moving shapes behind everything -->
    <div class="bg-shapes">
        <span></span><span></span><span></span><span></span>
    </div>

    <!-- Snowfall background layer -->
    <div class="snow-layer" id="snowLayer"></div>

    <button class="logout-btn" onclick="window.location.href='login.html'">Logout</button>

    <div class="booking-container">
        <h2>Book Your Worker</h2>

        <form action="booking.php" method="POST">
            <!-- Hidden Booking Info -->
            <div class="form-section">
                <div class="section-title">Booking Information</div>
                <div class="mb-3">
                    <label class="form-label">Booking ID</label>
                    <!-- show generated booking id as placeholder only so user can type their own if desired -->
                    <input type="text" name="booking_id" class="form-control" placeholder="Enter Booking ID">
                </div>

                <div class="mb-3">
                    <label class="form-label">Worker Name</label>
                    <!-- show selected worker as placeholder only so user can change it -->
                    <input type="text" name="worker_name" class="form-control" placeholder="Enter Worker Name" value=""
                        required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Service Type</label>
                    <input type="text" name="service_type" class="form-control" placeholder="e.g. Electrician, Plumber"
                        required>
                </div>
            </div>

            <div class="form-section">
                <div class="section-title">Address Type</div>
                <select name="address_type" class="form-select" required>
                    <option value="">Select Address Type</option>
                    <option value="Home">Home</option>
                    <option value="Office">Office</option>
                    <option value="PG">PG</option>
                </select>
            </div>

            <div class="form-section">
                <div class="section-title">Address Details</div>
                <div class="mb-3">
                    <label class="form-label">House Number</label>
                    <input type="text" name="house_number" class="form-control" placeholder="e.g. 123/A" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Landmark</label>
                    <input type="text" name="landmark" class="form-control" placeholder="e.g. Near City Mall" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Pincode</label>
                    <input type="number" name="pincode" class="form-control" placeholder="e.g. 110001" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Full Address</label>
                    <textarea name="full_address" rows="3" class="form-control"
                        placeholder="Write complete address here..." required></textarea>
                </div>
            </div>

            <div class="form-section">
                <div class="section-title">Your Contact Info</div>
                <div class="mb-3">
                    <label class="form-label">Your Name</label>
                    <input type="text" name="user_name" class="form-control" placeholder="Enter your name" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Phone Number</label>
                    <input type="text" name="user_phone" class="form-control" placeholder="Enter your phone number"
                        required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Booking Date</label>
                    <!-- show generated booking date as placeholder only and allow editing -->
                    <input type="text" name="booking_date" class="form-control" placeholder="Enter booking date"
                        value="">
                </div>
            </div>

            <button type="submit" class="btn btn-submit">Confirm Booking</button>
        </form>
    </div>

    <script>
        // Simple JS snowfall generator
        const snowContainer = document.getElementById("snowLayer");
        const FLAKE_COUNT = 80; // increase/decrease for density

        for (let i = 0; i < FLAKE_COUNT; i++) {
            const flake = document.createElement("div");
            flake.classList.add("flake");

            // random start position
            const startX = Math.random() * 100;      // vw
            const startDelay = Math.random() * 8;    // seconds
            const duration = 6 + Math.random() * 8;  // 6â€“14s
            const depth = -150 - Math.random() * 200; // translateZ depth
            const drift = (Math.random() * 40 - 20); // -20 to 20 vw

            flake.style.left = startX + "vw";
            flake.style.setProperty("--depth", depth + "px");
            flake.style.setProperty("--drift", drift + "vw");
            flake.style.animationDuration = duration + "s";
            flake.style.animationDelay = startDelay + "s";

            snowContainer.appendChild(flake);
        }
    </script>
</body>

</html>